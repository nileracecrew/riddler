Let the cone of the martini glass have height H and width W. When it is upright, the cross-section of the glass that is not filled is a trapezoid with area (1/2)*(W+Wp)*(H-Hp) = (1/2)*W*H*(1-p^2). When the glass is tipped to the point of just overflowing, the not-filled cross section is now a triangle of area (1/2)*W*(H-qH), where q is the new fraction of H where the top of the drink sits. These areas must be equal, so we have (1/2)*W*H*(1-q)=(1/2)*W*H*(1-p^2) or simply q = p^2.
